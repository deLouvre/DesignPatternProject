{"remainingRequest":"/Users/douchunliu/Desktop/a/vue-store/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/douchunliu/Desktop/a/vue-store/src/components/MyRegister.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/douchunliu/Desktop/a/vue-store/src/components/MyRegister.vue","mtime":1592496160922},{"path":"/Users/douchunliu/Desktop/a/vue-store/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/douchunliu/Desktop/a/vue-store/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/douchunliu/Desktop/a/vue-store/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/douchunliu/Desktop/a/vue-store/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTXlSZWdpc3RlciIsCiAgcHJvcHM6IFsicmVnaXN0ZXIiXSwKICBkYXRhKCkgewogICAgLy8g55So5oi35ZCN55qE5qCh6aqM5pa55rOVCiAgICBsZXQgdmFsaWRhdGVOYW1lID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAoIXZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl55So5oi35ZCNIikpOwogICAgICB9CiAgICAgIC8vIOeUqOaIt+WQjeS7peWtl+avjeW8gOWktCzplb/luqblnKg1LTE25LmL6Ze0LOWFgeiuuOWtl+avjeaVsOWtl+S4i+WIkue6vwogICAgICBjb25zdCB1c2VyTmFtZVJ1bGUgPSAvXlthLXpBLVpdW2EtekEtWjAtOV9dezQsMTV9JC87CiAgICAgIGlmICh1c2VyTmFtZVJ1bGUudGVzdCh2YWx1ZSkpIHsKICAgICAgICAvL+WIpOaWreaVsOaNruW6k+S4reaYr+WQpuW3sue7j+WtmOWcqOivpeeUqOaIt+WQjQogICAgICAgIHRoaXMuJGF4aW9zCiAgICAgICAgICAucG9zdCgiL2FwaS91c2Vycy9maW5kVXNlck5hbWUiLCB7CiAgICAgICAgICAgIHVzZXJOYW1lOiB0aGlzLlJlZ2lzdGVyVXNlci5uYW1lCiAgICAgICAgICB9KQogICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgLy8g4oCcMDAx4oCd5Luj6KGo55So5oi35ZCN5LiN5a2Y5Zyo77yM5Y+v5Lul5rOo5YaMCiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09ICIwMDEiKSB7CiAgICAgICAgICAgICAgdGhpcy4kcmVmcy5ydWxlRm9ybS52YWxpZGF0ZUZpZWxkKCJjaGVja1Bhc3MiKTsKICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKHJlcy5kYXRhLm1zZykpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOwogICAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcigi5a2X5q+N5byA5aS0LOmVv+W6pjUtMTbkuYvpl7Qs5YWB6K645a2X5q+N5pWw5a2X5LiL5YiS57q/IikpOwogICAgICB9CiAgICB9OwogICAgLy8g5a+G56CB55qE5qCh6aqM5pa55rOVCiAgICBsZXQgdmFsaWRhdGVQYXNzID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAodmFsdWUgPT09ICIiKSB7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl5a+G56CBIikpOwogICAgICB9CiAgICAgIC8vIOWvhueggeS7peWtl+avjeW8gOWktCzplb/luqblnKg2LTE45LmL6Ze0LOWFgeiuuOWtl+avjeaVsOWtl+WSjOS4i+WIkue6vwogICAgICBjb25zdCBwYXNzd29yZFJ1bGUgPSAvXlthLXpBLVpdXHd7NSwxN30kLzsKICAgICAgaWYgKHBhc3N3b3JkUnVsZS50ZXN0KHZhbHVlKSkgewogICAgICAgIHRoaXMuJHJlZnMucnVsZUZvcm0udmFsaWRhdGVGaWVsZCgiY2hlY2tQYXNzIik7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKAogICAgICAgICAgbmV3IEVycm9yKCLlrZfmr43lvIDlpLQs6ZW/5bqmNi0xOOS5i+mXtCzlhYHorrjlrZfmr43mlbDlrZflkozkuIvliJLnur8iKQogICAgICAgICk7CiAgICAgIH0KICAgIH07CiAgICAvLyDnoa7orqTlr4bnoIHnmoTmoKHpqozmlrnms5UKICAgIGxldCB2YWxpZGF0ZUNvbmZpcm1QYXNzID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAodmFsdWUgPT09ICIiKSB7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl56Gu6K6k5a+G56CBIikpOwogICAgICB9CiAgICAgIC8vIOagoemqjOaYr+WQpuS7peWvhueggeS4gOiHtAogICAgICBpZiAodGhpcy5SZWdpc3RlclVzZXIucGFzcyAhPSAiIiAmJiB2YWx1ZSA9PT0gdGhpcy5SZWdpc3RlclVzZXIucGFzcykgewogICAgICAgIHRoaXMuJHJlZnMucnVsZUZvcm0udmFsaWRhdGVGaWVsZCgiY2hlY2tQYXNzIik7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcigi5Lik5qyh6L6T5YWl55qE5a+G56CB5LiN5LiA6Ie0IikpOwogICAgICB9CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgaXNSZWdpc3RlcjogZmFsc2UsIC8vIOaOp+WItuazqOWGjOe7hOS7tuaYr+WQpuaYvuekugogICAgICBSZWdpc3RlclVzZXI6IHsKICAgICAgICBuYW1lOiAiIiwKICAgICAgICBwYXNzOiAiIiwKICAgICAgICBjb25maXJtUGFzczogIiIKICAgICAgfSwKICAgICAgLy8g55So5oi35L+h5oGv5qCh6aqM6KeE5YiZLHZhbGlkYXRvcijmoKHpqozmlrnms5UpLHRyaWdnZXIo6Kem5Y+R5pa55byPKSxibHVy5Li65Zyo57uE5Lu2IElucHV0IOWkseWOu+eEpueCueaXtuinpuWPkQogICAgICBydWxlczogewogICAgICAgIG5hbWU6IFt7IHZhbGlkYXRvcjogdmFsaWRhdGVOYW1lLCB0cmlnZ2VyOiAiYmx1ciIgfV0sCiAgICAgICAgcGFzczogW3sgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3MsIHRyaWdnZXI6ICJibHVyIiB9XSwKICAgICAgICBjb25maXJtUGFzczogW3sgdmFsaWRhdG9yOiB2YWxpZGF0ZUNvbmZpcm1QYXNzLCB0cmlnZ2VyOiAiYmx1ciIgfV0KICAgICAgfQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICAvLyDnm5HlkKzniLbnu4Tku7bkvKDov4fmnaXnmoRyZWdpc3RlcuWPmOmHj++8jOiuvue9rnRoaXMuaXNSZWdpc3RlcueahOWAvAogICAgcmVnaXN0ZXI6IGZ1bmN0aW9uKHZhbCkgewogICAgICBpZiAodmFsKSB7CiAgICAgICAgdGhpcy5pc1JlZ2lzdGVyID0gdmFsOwogICAgICB9CiAgICB9LAogICAgLy8g55uR5ZCsdGhpcy5pc1JlZ2lzdGVy5Y+Y6YeP55qE5YC877yM5pu05paw54i257uE5Lu2cmVnaXN0ZXLlj5jph4/nmoTlgLwKICAgIGlzUmVnaXN0ZXI6IGZ1bmN0aW9uKHZhbCkgewogICAgICBpZiAoIXZhbCkgewogICAgICAgIHRoaXMuJHJlZnNbInJ1bGVGb3JtIl0ucmVzZXRGaWVsZHMoKTsKICAgICAgICB0aGlzLiRlbWl0KCJmcm9tQ2hpbGQiLCB2YWwpOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBSZWdpc3RlcigpIHsKICAgICAgLy8g6YCa6L+HZWxlbWVudOiHquWumuS5ieihqOWNleagoemqjOinhOWIme+8jOagoemqjOeUqOaIt+i+k+WFpeeahOeUqOaIt+S/oeaBrwogICAgICB0aGlzLiRyZWZzWyJydWxlRm9ybSJdLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICAvL+WmguaenOmAmui/h+agoemqjOW8gOWni+azqOWGjAogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy4kYXhpb3MKICAgICAgICAgICAgLnBvc3QoIi9hcGkvdXNlcnMvcmVnaXN0ZXIiLCB7CiAgICAgICAgICAgICAgdXNlck5hbWU6IHRoaXMuUmVnaXN0ZXJVc2VyLm5hbWUsCiAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuUmVnaXN0ZXJVc2VyLnBhc3MKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAvLyDigJwwMDHigJ3ku6Pooajms6jlhozmiJDlip/vvIzlhbbku5bnmoTlnYfkuLrlpLHotKUKICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gIjAwMSIpIHsKICAgICAgICAgICAgICAgIC8vIOmakOiXj+azqOWGjOe7hOS7tgogICAgICAgICAgICAgICAgdGhpcy5pc1JlZ2lzdGVyID0gZmFsc2U7CiAgICAgICAgICAgICAgICAvLyDlvLnlh7rpgJrnn6XmoYbmj5DnpLrms6jlhozmiJDlip/kv6Hmga8KICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2VlZChyZXMuZGF0YS5tc2cpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyDlvLnlh7rpgJrnn6XmoYbmj5DnpLrms6jlhozlpLHotKXkv6Hmga8KICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IocmVzLmRhdGEubXNnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOwogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["MyRegister.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MyRegister.vue","sourceRoot":"src/components","sourcesContent":["<!--\n * @Description: 用户注册组件\n -->\n<template>\n  <div id=\"register\">\n    <el-dialog title=\"注册\" width=\"300px\" center :visible.sync=\"isRegister\">\n      <el-form\n        :model=\"RegisterUser\"\n        :rules=\"rules\"\n        status-icon\n        ref=\"ruleForm\"\n        class=\"demo-ruleForm\"\n      >\n        <el-form-item prop=\"name\">\n          <el-input\n            prefix-icon=\"el-icon-user-solid\"\n            placeholder=\"请输入账号\"\n            v-model=\"RegisterUser.name\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item prop=\"pass\">\n          <el-input\n            prefix-icon=\"el-icon-view\"\n            type=\"password\"\n            placeholder=\"请输入密码\"\n            v-model=\"RegisterUser.pass\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item prop=\"confirmPass\">\n          <el-input\n            prefix-icon=\"el-icon-view\"\n            type=\"password\"\n            placeholder=\"请再次输入密码\"\n            v-model=\"RegisterUser.confirmPass\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button size=\"medium\" type=\"primary\" @click=\"Register\" style=\"width:100%;\">注册</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"MyRegister\",\n  props: [\"register\"],\n  data() {\n    // 用户名的校验方法\n    let validateName = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error(\"请输入用户名\"));\n      }\n      // 用户名以字母开头,长度在5-16之间,允许字母数字下划线\n      const userNameRule = /^[a-zA-Z][a-zA-Z0-9_]{4,15}$/;\n      if (userNameRule.test(value)) {\n        //判断数据库中是否已经存在该用户名\n        this.$axios\n          .post(\"/api/users/findUserName\", {\n            userName: this.RegisterUser.name\n          })\n          .then(res => {\n            // “001”代表用户名不存在，可以注册\n            if (res.data.code == \"001\") {\n              this.$refs.ruleForm.validateField(\"checkPass\");\n              return callback();\n            } else {\n              return callback(new Error(res.data.msg));\n            }\n          })\n          .catch(err => {\n            return Promise.reject(err);\n          });\n      } else {\n        return callback(new Error(\"字母开头,长度5-16之间,允许字母数字下划线\"));\n      }\n    };\n    // 密码的校验方法\n    let validatePass = (rule, value, callback) => {\n      if (value === \"\") {\n        return callback(new Error(\"请输入密码\"));\n      }\n      // 密码以字母开头,长度在6-18之间,允许字母数字和下划线\n      const passwordRule = /^[a-zA-Z]\\w{5,17}$/;\n      if (passwordRule.test(value)) {\n        this.$refs.ruleForm.validateField(\"checkPass\");\n        return callback();\n      } else {\n        return callback(\n          new Error(\"字母开头,长度6-18之间,允许字母数字和下划线\")\n        );\n      }\n    };\n    // 确认密码的校验方法\n    let validateConfirmPass = (rule, value, callback) => {\n      if (value === \"\") {\n        return callback(new Error(\"请输入确认密码\"));\n      }\n      // 校验是否以密码一致\n      if (this.RegisterUser.pass != \"\" && value === this.RegisterUser.pass) {\n        this.$refs.ruleForm.validateField(\"checkPass\");\n        return callback();\n      } else {\n        return callback(new Error(\"两次输入的密码不一致\"));\n      }\n    };\n    return {\n      isRegister: false, // 控制注册组件是否显示\n      RegisterUser: {\n        name: \"\",\n        pass: \"\",\n        confirmPass: \"\"\n      },\n      // 用户信息校验规则,validator(校验方法),trigger(触发方式),blur为在组件 Input 失去焦点时触发\n      rules: {\n        name: [{ validator: validateName, trigger: \"blur\" }],\n        pass: [{ validator: validatePass, trigger: \"blur\" }],\n        confirmPass: [{ validator: validateConfirmPass, trigger: \"blur\" }]\n      }\n    };\n  },\n  watch: {\n    // 监听父组件传过来的register变量，设置this.isRegister的值\n    register: function(val) {\n      if (val) {\n        this.isRegister = val;\n      }\n    },\n    // 监听this.isRegister变量的值，更新父组件register变量的值\n    isRegister: function(val) {\n      if (!val) {\n        this.$refs[\"ruleForm\"].resetFields();\n        this.$emit(\"fromChild\", val);\n      }\n    }\n  },\n  methods: {\n    Register() {\n      // 通过element自定义表单校验规则，校验用户输入的用户信息\n      this.$refs[\"ruleForm\"].validate(valid => {\n        //如果通过校验开始注册\n        if (valid) {\n          this.$axios\n            .post(\"/api/users/register\", {\n              userName: this.RegisterUser.name,\n              password: this.RegisterUser.pass\n            })\n            .then(res => {\n              // “001”代表注册成功，其他的均为失败\n              if (res.data.code === \"001\") {\n                // 隐藏注册组件\n                this.isRegister = false;\n                // 弹出通知框提示注册成功信息\n                this.notifySucceed(res.data.msg);\n              } else {\n                // 弹出通知框提示注册失败信息\n                this.notifyError(res.data.msg);\n              }\n            })\n            .catch(err => {\n              return Promise.reject(err);\n            });\n        } else {\n          return false;\n        }\n      });\n    }\n  }\n};\n</script>\n<style>\n</style>"]}]}