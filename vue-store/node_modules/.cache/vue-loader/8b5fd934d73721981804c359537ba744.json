{"remainingRequest":"/Users/douchunliu/Desktop/a/vue-store/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/douchunliu/Desktop/a/vue-store/src/components/MyLogin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/douchunliu/Desktop/a/vue-store/src/components/MyLogin.vue","mtime":1592484114921},{"path":"/Users/douchunliu/Desktop/a/vue-store/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/douchunliu/Desktop/a/vue-store/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/douchunliu/Desktop/a/vue-store/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/douchunliu/Desktop/a/vue-store/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/douchunliu/Desktop/a/vue-store/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTXlMb2dpbiIsCiAgZGF0YSgpIHsKICAgIC8vIOeUqOaIt+WQjeeahOagoemqjOaWueazlQogICAgbGV0IHZhbGlkYXRlTmFtZSA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKCF2YWx1ZSkgewogICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+i+k+WFpeeUqOaIt+WQjSIpKTsKICAgICAgfQogICAgICAvLyDnlKjmiLflkI3ku6XlrZfmr43lvIDlpLQs6ZW/5bqm5ZyoNS0xNuS5i+mXtCzlhYHorrjlrZfmr43mlbDlrZfkuIvliJLnur8KICAgICAgY29uc3QgdXNlck5hbWVSdWxlID0gL15bYS16QS1aXVthLXpBLVowLTlfXXs0LDE1fSQvOwogICAgICBpZiAodXNlck5hbWVSdWxlLnRlc3QodmFsdWUpKSB7CiAgICAgICAgdGhpcy4kcmVmcy5ydWxlRm9ybS52YWxpZGF0ZUZpZWxkKCJjaGVja1Bhc3MiKTsKICAgICAgICByZXR1cm4gY2FsbGJhY2soKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCLlrZfmr43lvIDlpLQs6ZW/5bqmNS0xNuS5i+mXtCzlhYHorrjlrZfmr43mlbDlrZfkuIvliJLnur8iKSk7CiAgICAgIH0KICAgIH07CiAgICAvLyDlr4bnoIHnmoTmoKHpqozmlrnms5UKICAgIGxldCB2YWxpZGF0ZVBhc3MgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGlmICh2YWx1ZSA9PT0gIiIpIHsKICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCLor7fovpPlhaXlr4bnoIEiKSk7CiAgICAgIH0KICAgICAgLy8g5a+G56CB5Lul5a2X5q+N5byA5aS0LOmVv+W6puWcqDYtMTjkuYvpl7Qs5YWB6K645a2X5q+N5pWw5a2X5ZKM5LiL5YiS57q/CiAgICAgIGNvbnN0IHBhc3N3b3JkUnVsZSA9IC9eW2EtekEtWl1cd3s1LDE3fSQvOwogICAgICBpZiAocGFzc3dvcmRSdWxlLnRlc3QodmFsdWUpKSB7CiAgICAgICAgdGhpcy4kcmVmcy5ydWxlRm9ybS52YWxpZGF0ZUZpZWxkKCJjaGVja1Bhc3MiKTsKICAgICAgICByZXR1cm4gY2FsbGJhY2soKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gY2FsbGJhY2soCiAgICAgICAgICBuZXcgRXJyb3IoIuWtl+avjeW8gOWktCzplb/luqY2LTE45LmL6Ze0LOWFgeiuuOWtl+avjeaVsOWtl+WSjOS4i+WIkue6vyIpCiAgICAgICAgKTsKICAgICAgfQogICAgfTsKICAgIHJldHVybiB7CiAgICAgIExvZ2luVXNlcjogewogICAgICAgIG5hbWU6ICIiLAogICAgICAgIHBhc3M6ICIiCiAgICAgIH0sCiAgICAgIC8vIOeUqOaIt+S/oeaBr+agoemqjOinhOWImSx2YWxpZGF0b3Io5qCh6aqM5pa55rOVKSx0cmlnZ2VyKOinpuWPkeaWueW8jyksYmx1cuS4uuWcqOe7hOS7tiBJbnB1dCDlpLHljrvnhKbngrnml7bop6blj5EKICAgICAgcnVsZXM6IHsKICAgICAgICBuYW1lOiBbeyB2YWxpZGF0b3I6IHZhbGlkYXRlTmFtZSwgdHJpZ2dlcjogImJsdXIiIH1dLAogICAgICAgIHBhc3M6IFt7IHZhbGlkYXRvcjogdmFsaWRhdGVQYXNzLCB0cmlnZ2VyOiAiYmx1ciIgfV0KICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDojrflj5Z2dWV45Lit55qEc2hvd0xvZ2lu77yM5o6n5Yi255m75b2V57uE5Lu25piv5ZCm5pi+56S6CiAgICBpc0xvZ2luOiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRTaG93TG9naW47CiAgICAgIH0sCiAgICAgIHNldCh2YWwpIHsKICAgICAgICB0aGlzLiRyZWZzWyJydWxlRm9ybSJdLnJlc2V0RmllbGRzKCk7CiAgICAgICAgdGhpcy5zZXRTaG93TG9naW4odmFsKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucyhbInNldFVzZXIiLCAic2V0U2hvd0xvZ2luIl0pLAogICAgTG9naW4oKSB7CiAgICAgIC8vIOmAmui/h2VsZW1lbnToh6rlrprkuYnooajljZXmoKHpqozop4TliJnvvIzmoKHpqoznlKjmiLfovpPlhaXnmoTnlKjmiLfkv6Hmga8KICAgICAgdGhpcy4kcmVmc1sicnVsZUZvcm0iXS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgLy/lpoLmnpzpgJrov4fmoKHpqozlvIDlp4vnmbvlvZUKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMuJGF4aW9zCiAgICAgICAgICAgIC5wb3N0KCIvYXBpL3VzZXJzL2xvZ2luIiwgewogICAgICAgICAgICAgIHVzZXJOYW1lOiB0aGlzLkxvZ2luVXNlci5uYW1lLAogICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLkxvZ2luVXNlci5wYXNzCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgLy8g4oCcMDAx4oCd5Luj6KGo55m75b2V5oiQ5Yqf77yM5YW25LuW55qE5Z2H5Li65aSx6LSlCiAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09ICIwMDEiKSB7CiAgICAgICAgICAgICAgICAvLyDpmpDol4/nmbvlvZXnu4Tku7YKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2dpbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgLy8g55m75b2V5L+h5oGv5a2Y5Yiw5pys5ZywCiAgICAgICAgICAgICAgICBsZXQgdXNlciA9IEpTT04uc3RyaW5naWZ5KHJlcy5kYXRhLnVzZXIpOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXIiLCB1c2VyKTsKICAgICAgICAgICAgICAgIC8vIOeZu+W9leS/oeaBr+WtmOWIsHZ1ZXgKICAgICAgICAgICAgICAgIHRoaXMuc2V0VXNlcihyZXMuZGF0YS51c2VyKTsKICAgICAgICAgICAgICAgIC8vIOW8ueWHuumAmuefpeahhuaPkOekuueZu+W9leaIkOWKn+S/oeaBrwogICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlTdWNjZWVkKHJlcy5kYXRhLm1zZyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIOa4heepuui+k+WFpeahhueahOagoemqjOeKtuaAgQogICAgICAgICAgICAgICAgdGhpcy4kcmVmc1sicnVsZUZvcm0iXS5yZXNldEZpZWxkcygpOwogICAgICAgICAgICAgICAgLy8g5by55Ye66YCa55+l5qGG5o+Q56S655m75b2V5aSx6LSl5L+h5oGvCiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKHJlcy5kYXRhLm1zZyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["MyLogin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MyLogin.vue","sourceRoot":"src/components","sourcesContent":["<!--\n * @Description: 登录组件\n * @Author: hai-27\n * @Date: 2020-02-19 20:55:17\n * @LastEditors: hai-27\n * @LastEditTime: 2020-03-01 15:34:08\n -->\n<template>\n  <div id=\"myLogin\">\n    <el-dialog title=\"登录\" width=\"300px\" center :visible.sync=\"isLogin\">\n      <el-form :model=\"LoginUser\" :rules=\"rules\" status-icon ref=\"ruleForm\" class=\"demo-ruleForm\">\n        <el-form-item prop=\"name\">\n          <el-input prefix-icon=\"el-icon-user-solid\" placeholder=\"请输入账号\" v-model=\"LoginUser.name\"></el-input>\n        </el-form-item>\n        <el-form-item prop=\"pass\">\n          <el-input\n            prefix-icon=\"el-icon-view\"\n            type=\"password\"\n            placeholder=\"请输入密码\"\n            v-model=\"LoginUser.pass\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button size=\"medium\" type=\"primary\" @click=\"Login\" style=\"width:100%;\">登录</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport { mapActions } from \"vuex\";\n\nexport default {\n  name: \"MyLogin\",\n  data() {\n    // 用户名的校验方法\n    let validateName = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error(\"请输入用户名\"));\n      }\n      // 用户名以字母开头,长度在5-16之间,允许字母数字下划线\n      const userNameRule = /^[a-zA-Z][a-zA-Z0-9_]{4,15}$/;\n      if (userNameRule.test(value)) {\n        this.$refs.ruleForm.validateField(\"checkPass\");\n        return callback();\n      } else {\n        return callback(new Error(\"字母开头,长度5-16之间,允许字母数字下划线\"));\n      }\n    };\n    // 密码的校验方法\n    let validatePass = (rule, value, callback) => {\n      if (value === \"\") {\n        return callback(new Error(\"请输入密码\"));\n      }\n      // 密码以字母开头,长度在6-18之间,允许字母数字和下划线\n      const passwordRule = /^[a-zA-Z]\\w{5,17}$/;\n      if (passwordRule.test(value)) {\n        this.$refs.ruleForm.validateField(\"checkPass\");\n        return callback();\n      } else {\n        return callback(\n          new Error(\"字母开头,长度6-18之间,允许字母数字和下划线\")\n        );\n      }\n    };\n    return {\n      LoginUser: {\n        name: \"\",\n        pass: \"\"\n      },\n      // 用户信息校验规则,validator(校验方法),trigger(触发方式),blur为在组件 Input 失去焦点时触发\n      rules: {\n        name: [{ validator: validateName, trigger: \"blur\" }],\n        pass: [{ validator: validatePass, trigger: \"blur\" }]\n      }\n    };\n  },\n  computed: {\n    // 获取vuex中的showLogin，控制登录组件是否显示\n    isLogin: {\n      get() {\n        return this.$store.getters.getShowLogin;\n      },\n      set(val) {\n        this.$refs[\"ruleForm\"].resetFields();\n        this.setShowLogin(val);\n      }\n    }\n  },\n  methods: {\n    ...mapActions([\"setUser\", \"setShowLogin\"]),\n    Login() {\n      // 通过element自定义表单校验规则，校验用户输入的用户信息\n      this.$refs[\"ruleForm\"].validate(valid => {\n        //如果通过校验开始登录\n        if (valid) {\n          this.$axios\n            .post(\"/api/users/login\", {\n              userName: this.LoginUser.name,\n              password: this.LoginUser.pass\n            })\n            .then(res => {\n              // “001”代表登录成功，其他的均为失败\n              if (res.data.code === \"001\") {\n                // 隐藏登录组件\n                this.isLogin = false;\n                // 登录信息存到本地\n                let user = JSON.stringify(res.data.user);\n                localStorage.setItem(\"user\", user);\n                // 登录信息存到vuex\n                this.setUser(res.data.user);\n                // 弹出通知框提示登录成功信息\n                this.notifySucceed(res.data.msg);\n              } else {\n                // 清空输入框的校验状态\n                this.$refs[\"ruleForm\"].resetFields();\n                // 弹出通知框提示登录失败信息\n                this.notifyError(res.data.msg);\n              }\n            })\n            .catch(err => {\n              return Promise.reject(err);\n            });\n        } else {\n          return false;\n        }\n      });\n    }\n  }\n};\n</script>\n<style>\n</style>"]}]}